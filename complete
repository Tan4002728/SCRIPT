-- Load Tora Library (New Version)
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/liebertsx/Tora-Library/main/src/librarynew",true))()

-- Create Window
local tab = library:CreateWindow("Blind Shot")

-- Create Tab/Folder
local folder = tab:AddFolder("Main")

-- ESP Variables
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local localPlayer = Players.LocalPlayer

-- See Players Variable
_G.SeePlayers = false
local eventConnection = nil
local Event = ReplicatedStorage:WaitForChild("invisivel")

-- See Players Toggle
folder:AddToggle({
    text = "Anti Invis",
    flag = "SeePlayersToggle",
    callback = function(Value)
        _G.SeePlayers = Value
        
        if Value then
            -- Bật ESP
            if not eventConnection then
                eventConnection = Event.OnClientEvent:Connect(function(value)
                    if _G.SeePlayers and value == true then
                        task.defer(function()
                            firesignal(Event.OnClientEvent, false)
                        end)
                    end
                end)
            end
            
            -- Trigger ngay
            task.spawn(function()
                firesignal(Event.OnClientEvent, false)
            end)
        else
            -- Tắt ESP
            if eventConnection then
                eventConnection:Disconnect()
                eventConnection = nil
            end
            
            -- Reset lại trạng thái về invisible
            task.spawn(function()
                firesignal(Event.OnClientEvent, true)
            end)
        end
    end
})

-- Auto Lobby Toggle
folder:AddToggle({
    text = "Trophy Farm",
    flag = "auto_lobby_toggle",
    callback = function(value)
        _G.TrophyFarm = value
        if value then
            spawn(function()
                while _G.TrophyFarm do
                    local char = localPlayer.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    local trophyPart = Workspace:FindFirstChild("Trophy", true)
                    
                    if trophyPart and hrp then
                        firetouchinterest(hrp, trophyPart, 0)
                        task.wait()
                        firetouchinterest(hrp, trophyPart, 1)
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
})

-- Add Label with Credit
folder:AddLabel({
    text = "Tiktok : gr0k3_script",
    type = "label"
})

-- Initialize the library (REQUIRED)
library:Init()
